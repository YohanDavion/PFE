<div class="parametres-container">
  <div class="parametres-card">
    <h1>{{ isEditingPatient ? "Modification de l'utilisateur" : "Paramètres" }}</h1>

    <form [formGroup]="parametresForm" (ngSubmit)="onSubmit()" class="parametres-form">
      <div class="form-row">
        <div class="form-group">
          <label for="nom">Nom</label>
          <input type="text" id="nom" formControlName="nom" class="form-control" [class.readonly]="!isEditingPatient">
          @if (parametresForm.get('nom')?.invalid && parametresForm.get('nom')?.touched) {
            <div class="error-message">Le nom est requis</div>
          }
        </div>

        <div class="form-group">
          <label for="prenom">Prénom</label>
          <input type="text" id="prenom" formControlName="prenom" class="form-control" [class.readonly]="!isEditingPatient">
          @if (parametresForm.get('prenom')?.invalid && parametresForm.get('prenom')?.touched) {
            <div class="error-message">Le prénom est requis</div>
          }
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="email">Login/Email : </label>
          <input type="email" id="email" formControlName="email" class="form-control" [class.readonly]="!isEditingPatient">
          @if (parametresForm.get('email')?.invalid && parametresForm.get('email')?.touched) {
            <div class="error-message">L'email est invalide</div>
          }
        </div>

        <div class="form-group">
          <label for="telephone">Téléphone</label>
          <input type="tel" id="telephone" formControlName="telephone" class="form-control">
          @if (parametresForm.get('telephone')?.invalid && parametresForm.get('telephone')?.touched) {
            <div class="error-message">Le numéro de téléphone est requis</div>
          }
        </div>
      </div>

      @if (userType === 'PATIENT' || userType === 'ORTHOPHONISTE') {
        <div class="form-group">
          <label for="adresse">Adresse</label>
          <input type="text" id="adresse" formControlName="adresse" class="form-control">
        </div>
      }

<!--      @if (userType === 'PATIENT') {-->
<!--        <div class="form-group">-->
<!--          <label for="dateNaissance">Date de naissance</label>-->
<!--          <input type="date" id="dateNaissance" formControlName="dateNaissance" class="form-control">-->
<!--        </div>-->
<!--      }-->

<!--      @if (userType === 'ORTHOPHONISTE') {-->
<!--        <div class="form-group">-->
<!--          <label for="numeroAdeli">Numéro Adeli</label>-->
<!--          <input type="text" id="numeroAdeli" formControlName="numeroAdeli" class="form-control">-->
<!--        </div>-->
<!--      }-->

      <div class="messages">
        @if (successMessage) {
          <div class="success-message">{{ successMessage }}</div>
        }
        @if (errorMessage) {
          <div class="error-message">{{ errorMessage }}</div>
        }
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="!parametresForm.valid || loading" class="submit-button">
          {{ loading ? 'Enregistrement...' : (isEditingPatient ? 'Modifier le patient' : 'Enregistrer les modifications') }}
        </button>
      </div>
    </form>
  </div>
</div>
