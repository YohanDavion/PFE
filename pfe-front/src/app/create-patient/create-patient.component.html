<div class="create-patient-container">
  <p-card header="Création d'un nouveau patient" styleClass="create-patient-card">
    <form [formGroup]="patientForm" (ngSubmit)="onSubmit()" class="create-patient-form">
      <div class="form-section">
        <h2>Informations du patient</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="nom">Nom *</label>
            <input pInputText id="nom" formControlName="nom" class="form-control" />
            @if (patientForm.get('nom')?.invalid && patientForm.get('nom')?.touched) {
              <div class="error-message">Le nom est requis</div>
            }
          </div>

          <div class="form-group">
            <label for="prenom">Prénom *</label>
            <input pInputText id="prenom" formControlName="prenom" class="form-control" />
            @if (patientForm.get('prenom')?.invalid && patientForm.get('prenom')?.touched) {
              <div class="error-message">Le prénom est requis</div>
            }
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="email">Email *</label>
            <input pInputText type="email" id="email" formControlName="email" class="form-control" />
            @if (patientForm.get('email')?.invalid && patientForm.get('email')?.touched) {
              <div class="error-message">L'email est invalide</div>
            }
          </div>

          <div class="form-group">
            <label for="telephone">Téléphone *</label>
            <input pInputText type="tel" id="telephone" formControlName="telephone" class="form-control" />
            @if (patientForm.get('telephone')?.invalid && patientForm.get('telephone')?.touched) {
              <div class="error-message">Le téléphone est requis</div>
            }
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="adresse">Adresse</label>
            <input pInputText id="adresse" formControlName="adresse" class="form-control" />
          </div>

          <div class="form-group">
            <label for="dateNaissance">Date de naissance</label>
            <input pInputText type="date" id="dateNaissance" formControlName="dateNaissance" class="form-control" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h2>Informations du parent</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="nomParent">Nom du parent *</label>
            <input pInputText id="nomParent" formControlName="nomParent" class="form-control" />
            @if (patientForm.get('nomParent')?.invalid && patientForm.get('nomParent')?.touched) {
              <div class="error-message">Le nom du parent est requis</div>
            }
          </div>

          <div class="form-group">
            <label for="prenomParent">Prénom du parent *</label>
            <input pInputText id="prenomParent" formControlName="prenomParent" class="form-control" />
            @if (patientForm.get('prenomParent')?.invalid && patientForm.get('prenomParent')?.touched) {
              <div class="error-message">Le prénom du parent est requis</div>
            }
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button pButton type="button" label="Annuler" class="p-button-secondary" (click)="cancel()"></button>
        <button pButton type="submit" label="Créer le patient" [disabled]="!patientForm.valid || loading" 
                [loading]="loading" class="p-button-primary"></button>
      </div>
    </form>
  </p-card>
</div>
<p-toast></p-toast> 